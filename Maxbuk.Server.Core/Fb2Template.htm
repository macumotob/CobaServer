<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>{{TITLE}}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="HandheldFriendly" content="true">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta http-equiv="pragma" content="no-cache">
  <meta charset="utf-8" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/bootstrap-dialog.min.css" />

  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <script type="text/javascript" src="js/bootstrap-dialog.min.js"></script>

  <!--
  <html>

    <head>
      <title>##file_name##</title>
      <meta charset="utf-8" />


  -->
  <!--CONTAINER
    waswas-complex: <div class='fb2-{0} {2}'>{1},</div>
    epigraph: <br/><div class='fb2-{0}' {2}>{1}, </div><div class='fb2-break'></div>
    emphasis: <u class='fb2-{0}' {2}>&nbsp;{1},&nbsp;</u>
    section:  <br/><div class='fb2-{0}' {2}>{1},</div><br/>

    description : <div id='fb2-description' class='fb2-{0}' {2} >{1} , </div>

    title-info    : <div class='fb2-{0} {2}'>{1}, </div><div class='fb2-break'></div>
    document-info : <div class='fb2-{0} {2}'>{1} , </div>

    author      : <div class='fb2-{0}' {2}>{1}, </div>
    annotation  : <div class='fb2-{0}' {2}>{1}, </div>
    coverpage   : <div class='fb2-{0}' {2}>{1} coverpage , </div>
    publish-info: <div class='fb2-{0}' {2}>{1} publish-info, </div>

    body   : <div class='fb2-{0}' {2}>{1}, </div>
    title  : <br/><div class='fb2-{0}' {2}>{1}, </div><br/>
    p      : <div class='fb2-{0}' {2}>{1}, </div>
    v      : <div class='fb2-{0}' {2}>{1},</div>
    a      : <a class='fb2-{0}' {2} target="_blank">{1},</a>
    poem   : <div class='fb2-{0}' {2}>{1}, </div>
    stanza : <div class='fb2-{0}' {2}>{1},</div>
    history: <div class='fb2-{0}' {2}>{1}, </div>

    cite    : <div class='fb2-{0}' {2}>{1}, </div>
    translator: <div class='fb2-{0}' {2}>{1}, </div>
    text-author: <div class='fb2-{0}' {2}>{1}, </div>
    subtitle: <div class='fb2-{0}' {2}>{1}, </div>
    sup       : <div class='fb2-{0}' {2}>{1}, </div>
    strong    : <div class='fb2-{0}' {2}>{1}, </div>
    publisher : <div class='fb2-{0}' {2}>{1}, </div>

    src-title-info : <div class='fb2-{0}' {2}>{1}, </div>
    style : <div class='fb2-{0}' {2}>{1}, </div>
    table : <div class='fb2-{0}' {2}>{1}, </div>
    tr    : <div class='fb2-{0}' {2}>{1}, </div>
    td    : <div class='fb2-{0}' {2}>{1}, </div>
    sub   : <div class='fb2-{0}' {2}>{1}, </div>
    code  : <div class='fb2-{0}' {2}>{1}, </div>

    strikethrough: <div class='fb2-{0}' {2}>{1}, </div>
    myheader :  <div class='fb2-{0}' {2}>{1}, </div>
    myfooter :  <div class='fb2-{0}' {2}>{1}, </div>
  -->
  <!--SIMPLE

   waswas-simple: <div class='fb2-{0}' {2}>:{1}</div>
   section    : <div class='fb2-{0}' {2}>:{1}</div>
   strikethrough: <div class='fb2-{0}' {2}> strikethrough      :{1}</div>
   td         : <div class='fb2-{0}' {2}> td      :{1}</div>
   th         : <div class='fb2-{0}' {2}> th      :{1}</div>
   code       : <div class='fb2-{0}' {2}> code      :{1}</div>
   stanza     : <div class='fb2-{0}' {2}> stanza      :{1}</div>
   style      : <div class='fb2-{0}' {2}> style       :{1}</div>
   cite       : <div class='fb2-{0}' {2}> cite :{1}</div>
   stylesheet : <div class='fb2-{0}' {2}> stylesheet     :{1}</div>
   EM         : <div class='fb2-{0}' {2}> EM    :{1}</div>
   history    : <div class='fb2-{0}' {2}> history    :{1}</div>
   url        : <div class='fb2-{0}' {2}> URL:{1}</div>
   i          : <div class='fb2-{0}' {2}> I SIMPLE:{1}</div>
   text-author: <div class='fb2-{0}' {2}> text-author:{1}</div>
   keywords   : <div class='fb2-{0}' {2}> keywords   :{1}</div>
   subtitle   : <div class='fb2-{0}' {2}>{1}</div>
   book-title : <div class='fb2-{0}' {2}><b>{1}</b></div>
   lang       : <div class='fb2-{0}' {2}> Language {1}:</div>

   empty-line : <div class='fb2-{0}'{2}></div><br/>
   emphasis   : <u class='fb2-{0}' {2}>&nbsp;{1}&nbsp;</u>
   strong     : <strong class='fb2-{0}' {2}>{1}</strong>{3}
   p          : <p class='fb2-{0}' {2}>{1}</p>
   a          : <a class='fb2-{0}' {2} target="_blank">{1}</a>
   v          : <div class='fb2-{0}' {2}>{1}</div>
   first-name : <div class='fb2-{0}' {2}> First Name: <b>{1}</b> </div>
   last-name  : <div class='fb2-{0}' {2}>Last Name:  <b>{1}</b> </div>
   middle-name: <div class='fb2-{0}' {2}>Midle Name:  <b>{1}</b> </div>

   nickname   : <div class='fb2-{0}' {2}> Nickname {1}</div>
   email      : <div class='fb2-{0}' {2}> emain {1}</div>
   genre2     : <div class='fb2-{0}' {2}><div class='fb2-{0}-label'>Genre</div><div class='fb2-{0}-value'>{1}</div></div>
   genre      : <div class='fb2-{0}' {2}><div class='fb2-{0}-label'>Жанр : <span class='fb2-{0}-value'>{1}</span></div></div>
   date       : <div class='fb2-{0}' {2}>Date {1}</div>

   image      : <div class='fb2-div-{0}'><img class='fb2-{0}' src="data:{1};base64,{2}"></div>

   program-used : <div class='fb2-{0}' {2}> Program used:{1}</div>
   version      : <div class='fb2-{0}' {2}> Version: {1}:</div>
   id           : <div class='fb2-{0}' {2}> ID:{1}:</div>
   sequence     : <div class='fb2-{0}' {2}> sequence:{1}:</div>
   src-ocr      : <div class='fb2-{0}' {2}> src-ocr:{1}:</div>
   book-name    : <div class='fb2-{0}' {2}> book-name:{1}:</div>
   publisher    : <div class='fb2-{0}' {2}> publisher:{1}:</div>
   city         : <div class='fb2-{0}' {2}> city:{1}:</div>
   year         : <div class='fb2-{0}' {2}> year:{1}:</div>
   isbn         : <div class='fb2-{0}' {2}> isbn:{1}:</div>
   src-url      : <div class='fb2-{0}' {2}> src-url :{1}:</div>
   src-lang     : <div class='fb2-{0}' {2}> src-url :{1}:</div>
   custom-info  : <div class='fb2-{0}' {2}> custom-info  :{1}:</div>
   home-page    : <div class='fb2-{0}' {2}> home-page    :{1}:</div>
   sup          : <div class='fb2-{0}' {2}> sup  :{1}:</div>
   sub          : <div class='fb2-{0}' {2}> sub  :{1}:</div>
   annotation   : <div class='fb2-{0}' {2}> annotation  :{1}:</div>
   coverpage    : <div class='fb2-{0}' {2}> coverpage     :{1}:</div>
   publish-info : <div class='fb2-{0}' {2}> publish-info   :{1}:</div>
   title        : <div class='fb2-{0}' {2}> title        :{1}:</div>
   library      : <div class='fb2-{0}' {2}> library      :{1}:</div>
  -->
  <style>
    body {
      font-family: Georgia, 'Times New Roman', Times, serif;
      font-size: 20px;
      background-color: rgb(248,248,248);
      margin:0;
      padding:0;
    }

    .fb2-description {
      position: fixed;
      background-color:black;
      color:darkslategrey;
      display:none;
      top:20px;
      width: 80%;
      left: 10%;
    }

    .fb2-title-info {
      position: relative;
      width: 100%;
    }

    .fb2-author {
    }

    .fb2-epigraph {
      position: relative;
      font-family: Arial Baltic;
      font-style: italic;
      font-size: large;
      color: black;
      left: 40%;
      width: 50%;
    }

    .fb2-document-info {
    }

    .fb2-break {
      background-color: rgb(128,128,128);
      width: 100%;
      height: 23px;
    }

    .fb2-emphasis {
    }

    .fb2-genre {
    }

    .fb2-genre-label {
    }

    .fb2-genre-value {
      font-style:italic;
    }

    .fb2-stanza {
      background-color: White;
      left: 10%;
      width: 90%;
      position: relative;
      font-style: italic;
      color: DarkBlue;
    }

    .fb2-a {
      cursor: pointer;
    }

    .fb2-section {
      position: relative;
      width: 80%;
      left: 10%;
    }

    .fb2-title {
      font-size: x-large;
      font-style: oblique;
      text-align: center;
    }

    .fb2-div-image {
      width: 100%;
    }

    .fb2-image {
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    .fb2-subtitle {
      width: 100%;
      text-align: center;
      background-color: rgb(198,198,198);
    }

    .program-used {
      float: left;
      padding: 2px 2px 2px 2px;
      font-style: oblique;
    }

    .date {
      float: left;
      padding: 2px 2px 2px 2px;
      font-style: oblique;
    }

    .id {
      float: left;
      padding: 2px 2px 2px 2px;
      font-style: oblique;
    }

    .version {
      float: left;
      padding: 2px 2px 2px 2px;
      font-style: oblique;
    }

    .book-title {
      font-family: Tahoma;
      font-size: 23px;
      border: 2px solid red;
    }

    .coverpage {
      background-color: Olive;
    }

    .annotation {
      background-color: Aqua;
    }

    .fb2-poem {
      position: relative;
      left: 0%;
      width: 100%;
      border: 1px solid black;
      background-color: Beige;
    }

    .fb2-empty-line {
      position: relative;
      left: 3%;
      width: 94%;
      height: 3px;
      background-color: rgb(208,208,208);
    }

    .fb2-p {
      padding: 2px 2px 2px 2px;
      margin: 2px 2px 2px 2px;
    }
  </style>
  
  
</head>

<body>
  <!--
  <div style="font-family:Webdings; font-size:23; background-color:White;">
  `1234567890-=\qwertyuiop[]asdfghjkl;'zxcvbnm,./~!@#$%^&*()_+|QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>?
  </div>
  <div style="font-family:Wingdings; font-size: 23; background-color: yellow;">
      `1234567890-=\qwertyuiop[]asdfghjkl;'zxcvbnm,./~!@#$%^&*()_+|QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>?
    </div>
  <div style="font-family:Wingdings 2; font-size: 23; background-color: White;">
      `1234567890-=\qwertyuiop[]asdfghjkl;'zxcvbnm,./~!@#$%^&*()_+|QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>?
    </div>
  <div style="font-family:Wingdings 3; font-size: 23; background-color: White;">
      `1234567890-=\qwertyuiop[]asdfghjkl;'zxcvbnm,./~!@#$%^&*()_+|QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>?
    </div>
    -->
  {{BODY}}

  <div class="container-fluid text-center bg-success">Ниже уже ничего нет</div>
  <div style="width:100%;height:250px;background-color:white"></div>
  <div class="row-fluid navbar-inverse navbar-fixed-bottom" style="height:70px;opacity:0.9;margin:0;padding:0;">
    <table style="color:white;width:100%">
      <tr>
        <td colspan="3" style="text-align:center;font-size:small">{{FILENAME}}</td>
      </tr>
      <tr>
        <td onclick="fb2_create_rename_dialog();" style="text-align:center;">
          <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-pencil"></span></button>
        </td>
        <td onclick="fb2_toogle_description();" style="text-align:center;">
          <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-book"></span></button>
        </td>
        <td onclick="fb2_night_mode();" style="text-align:center;">
          <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-adjust"></span></button>
        </td>
        <td onclick="fb2_show_settings();" style="text-align:center;">
          <button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-adjust"></span></button>
        </td>
    </tr>
     </table>
  </div>

  <div style="display:none;width:100%;">
    <div id="show-settings" class="row-fluid">
      <div class="col-xs-4">
        <button class="btn btn-primary" onclick="fb2_change_font('+');">Font+</button> 
      </div>
      <div class="col-xs-4">
        <button class="btn btn-primary" onclick="fb2_change_font('-');">Font+</button>
      </div>
    </div>
    
  </div>
  
  
  <!-- Modal Rename File on Server-->
  <script type="text/javascript">

    var night_mode = false;
    var font_size = 20;

    function fb2_night_mode() {
      if (night_mode) {
        document.body.style.backgroundColor = "white";
        document.body.style.color = "black";
      }
      else {
        document.body.style.backgroundColor = "black";
        document.body.style.color = "rgb(200,200,200)";
      }
      night_mode = !night_mode;
    }


    function fb2_toogle_description() {
      var desc = document.getElementById('fb2-description');

      BootstrapDialog.show({
        title: 'Описание книги',
        message: desc.innerHTML
      });
    }

    function fb2_show_settings(){
      BootstrapDialog.show({
        title: 'Переименовать файл',
        message: document.getElementById("show-settings").innerHTML
        });
    }

    function fb2_change_font(x) {
      font_size += (x === '+' ? 1 : -1);
      document.body.style.fontSize =  font_size +"px";
    }

    function fb2_create_rename_dialog() {
      var loc = "{{FULLFILENAME}}";
      var $textAndPic = $('<div></div>');
      $textAndPic.append('Расположение : {{FULLFILENAME}}<br/>');
      $textAndPic.append('Папка:<br/><input id="folder-name" type="text" style="width:100%" value="{{FOLDER}}"/><br/>');
      $textAndPic.append('Новое имя:<br/><input id="file-name" type="text" style="width:100%" value="{{TITLE}}.fb2"/>');

      BootstrapDialog.show({
        title: 'Переименовать файл',
        message: $textAndPic,
        buttons: [{
          label: 'Переименовать',
          action: function (dialogRef) {
            var folder = document.getElementById("folder-name").value;
            var filename  = document.getElementById("file-name").value;
            var url = "file.rename?loc=" + loc + "&folder=" + folder + "&file=" + filename;
            //ajax
            $.ajax({
              url: url,
              type:"GET",
              success: function (data) {
                alert("success" + data);
              }
            }).fail(function (data) {
              var x = eval('(' + data.responseText + ')');
              if (x.result) {
                alert("Файл переименовани");
                window.close();
              }
              else {
                alert("error :" + x.msg);
              }
            });
            dialogRef.close();
          }
        }, {
          label: 'Отмена',
          action: function (dialogRef) {
            dialogRef.close();
          }
        }]
      });
    }
  </script>

</body>
</html>